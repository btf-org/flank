# Flank

Flank is a utility to make your scripts more powerful. 

## ⚡️ Quickstart ⚡️

The first step is to **run a script on your computer** through Flank.

<details>
  <summary>Python</summary>

---

#### 1a. Install Flank (Mac)
```bash
brew tap btf-org/flank && brew install btf-org/flank/flank && brew services start flank
```

#### 1b. Install Flank (Linux)
```bash
wget https://github.com/btf-org/flank/releases/download/v0.1.65/flank_0.1.65_amd64.deb && sudo FLANK_USER=$(whoami) apt install ./flank_0.1.65_amd64.deb
```

#### 2. Add your script to Flank

(Swap out `myscript.py` for whatever your script name is)

```
iflank add myscript.py
```

#### 3. Confirm that the Flank-generated "wrapper script" is correct

Flank will create a "wrapper script" that:

1. `cd`s into the directory of your script
2. If detected, activates your virtual environment
3. Runs your script

By following the hyperlink outputted by `iflank add` (it'll be something like http://localhost:8083/myscript.js?edit), you'll be able to confirm that Flank filled these out correctly, and you can tweak if need be.

#### 4. Run your script and view output in the browser

You should be presented with a page with \[ Run \] button where you can trigger your script. Run it and you should see the output in the browser. 

---

</details>

<details>
  
  <summary>R</summary>

---

#### 1a. Install Flank (Mac)
```bash
brew tap btf-org/flank && brew install btf-org/flank/flank && brew services start flank
```

#### 1b. Install Flank (Linux)

```bash
wget https://github.com/btf-org/flank/releases/download/v0.1.65/flank_0.1.65_amd64.deb && sudo FLANK_USER=$(whoami) apt install ./flank_0.1.65_amd64.deb
```

#### 2. Add your script to Flank

(Swap out `myscript.R` for whatever your script name is)

```
iflank add myscript.R
```

#### 3. Confirm that the Flank-generated "wrapper script" is correct

Flank will create a "wrapper script" that:

1. `cd`s into the directory of your script
2. Runs your script

By following the hyperlink outputted by `iflank add` (it'll be something like http://localhost:8083/myscript.R?edit), you'll be able to confirm that Flank filled these out correctly, and you can tweak if need be.

#### 4. Run your script and view output in the browser

You should be presented with a page with \[ Run \] button where you can trigger your script. Run it and you should see the output in the browser. 

---

</details>

<details>
  
  <summary>Other Languages</summary>

---

#### 1a. Install Flank (Mac)
```bash
brew tap btf-org/flank && brew install btf-org/flank/flank && brew services start flank
```

#### 1b. Install Flank (Linux)

```bash
wget https://github.com/btf-org/flank/releases/download/v0.1.65/flank_0.1.65_amd64.deb && sudo FLANK_USER=$(whoami) apt install ./flank_0.1.65_amd64.deb
```

#### 2. Add your script to Flank

(Swap out `myscript.js` for whatever your script name is)

```
iflank add myscript.js
```

#### 3. Confirm that the Flank-generated "wrapper script" is correct

Flank will create a "wrapper script" that:

1. `cd`s into the directory of your script
2. Runs your script

By following the hyperlink outputted by `iflank add` (it'll be something like http://localhost:8083/myscript.js?edit), you'll be able to confirm that Flank filled these out correctly, and you can tweak if need be.

#### 4. Run your script and view output in the browser

You should be presented with a page with \[ Run \] button where you can trigger your script. Run it and you should see the output in the browser. 

---

</details>


## Build a website from a script

Flank is a website that wraps your CLI.

When you add a script to Flank, Flank wraps your script with another script. Using this "wrapper script" as a template, Flank generates a website for running your script. And when you run it, the output appears in the browser.

#### Example: `city_filter.py`
```python
import pandas as pd
import argparse

# Set up argument parser
parser = argparse.ArgumentParser(description='Filter data by city')
parser.add_argument('--city', default='New York', help='City to filter by')
args = parser.parse_args()

df = pd.DataFrame({
    'Name': ['Alice', 'Bob', 'Charlie', 'Diana'],
    'Age': [25, 30, 35, 28],
    'City': ['New York', 'London', 'New York', 'Paris']
})

filtered_df = df[df['City'] == args.city]
filtered_df.to_html('output.html', index=False)
print(f"Generated table for {args.city}: {len(filtered_df)} rows")
```

#### Example: The "wrapper script" generated by Flank

```bash
cd /Users/anguspmitchell/Workspace/data-proc/city-filter.py
. ./venv/bin/activate
python city-filter.py --city ${city}
```

#### Example: Template page generated from the "wrapper script"

<img/>

#### Example: Flank forwards `stdout` from your CLI to the browser

<img/>

## Script-Driven Development

In the output of your script, you can include HTML tables, data graphics, and links to run other scripts (every script in Flank has a unique URL)

With nothing more than a script, you can build...

- Dashboards
- Reports
- Internal tools
- CRUD apps

For example, the previous script could return an HTML table...

```python
# beginning of the script is the same...

filtered_df.to_html('output.html', index=False)
```

And then in Flank you see an HTML table...

<img/>

  
## The Anti-Pitch

Flank is an "80/20" tool, so certain assumptions make it a bad fit for certain scenarios:

- Flank models user actions as input → output
  - ❌ Chatbots
  - ❌ Map applications
  - ❌ Dashboards with distinct, side-by-side components
- Flank assumes user actions can be accomplished with a script
  - ❌ Editing proprietary document formats (Word, Photoshop, etc)
- Flank assumes the benefits of self-hosting (especially around security) outweigh the inconvenience of setting it up
  - ❌ DB security isn't a concern and a hosted app is faster to setup
- Flank runs on one machine
  - ❌ Combined workload exceeds what a single machine can handle
- Flank tries to be 0-dependency, but for pipelining it relies on `make`
  - ❌ Advanced pipeline behavior, like runtime dynamic graphs
- Flank assumes that the browser is the right delivery mechanism
  - ❌ Applications that need to be available offline
  - ❌ Applications that should live within another app (e.g. Slack)
- Flank assumes that writing scripts is easier/faster than the alternative
  - ❌ Your org won't allow you to publish anything without a design review anyway
  - ❌ You already have some scaffolding for writing/delivering "script-y logic" (e.g. an API hooked up to some app builder)
  - ❌ The real complexity of your app lies in the CSS/design

For more details on alternative tools, see thoughts on [Reporting / Dashboards](/docs/not_written_yet.md), [Internal Tools](/docs/not_written_yet.md), [Scheduling / Pipelines](/docs/not_written_yet.md), [Deploying Scripts to the Cloud](/docs/not_written_yet.md), [Chat-Based Interfaces](/docs/not_written_yet.md), and [Developer Tools](/docs/not_written_yet.md).

## Full Docs

- [Troubleshooting](/docs/not_written_yet.md)
- [Upgrading](/docs/not_written_yet.md)
- [More](/docs/not_written_yet.md)

## About the project

I'm a data engineering consultant. I like Unix. I don't like Azure. I've tried to add as little as possible to Flank, but whenever I'm sufficiently annoyed with doing some task, I've tried to figure out some way to expose it through Flank. 

If you have any questions, feel free to shoot me an email at anguspmitchell@gmail.com
